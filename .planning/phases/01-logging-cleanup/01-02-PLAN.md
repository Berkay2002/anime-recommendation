---
phase: 01-logging-cleanup
plan: 02
type: execute
wave: 1
depends_on: [01-01]
files_modified:
  - frontend/services/animeCacheService.ts
  - frontend/services/jikanService.ts
  - frontend/services/anilistService.ts
  - frontend/services/animeService.ts
autonomous: true
must_haves:
  truths:
    - "All service files use structured logging instead of console.log"
    - "Log messages include contextual information (service name, operation)"
    - "Errors are logged with full context and stack traces"
  artifacts:
    - path: "frontend/services/animeCacheService.ts"
      provides: "Anime cache service with structured logging"
      replaces: "console.log/console.error statements"
    - path: "frontend/services/jikanService.ts"
      provides: "Jikan API service with structured logging"
      replaces: "console.log/console.error statements"
    - path: "frontend/services/anilistService.ts"
      provides: "AniList service with structured logging"
      replaces: "console.log/console.error statements"
    - path: "frontend/services/animeService.ts"
      provides: "Anime service with structured logging"
      replaces: "console.log/console.error statements"
  key_links:
    - from: "services/*.ts"
      to: "@/lib/logger"
      via: "import statement"
      pattern: "import.*logger.*from.*@/lib/logger"
---

<objective>
Replace all console.log/console.error statements in the service layer with structured logging using the Pino logger.

Purpose: Clean up the business logic layer by replacing ad-hoc console statements with professional logging that includes context and proper log levels.
Output: Four refactored service files with consistent structured logging patterns.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-logging-cleanup/01-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Refactor animeCacheService.ts logging</name>
  <files>frontend/services/animeCacheService.ts</files>
  <action>
    Replace all console.log and console.error statements in animeCacheService.ts:
    - Import logger from '@/lib/logger' at the top
    - Replace console.log with appropriate log levels (debug for detailed info, info for important events)
    - Replace console.error with logger.error
    - Add contextual information to each log (mal_id, anime_id, query, etc.)
    - Use child loggers with service context: logger.child({ service: 'AnimeCacheService' })
    - Maintain the same error handling logic, just improve logging
    - Ensure all error logs include the error object and relevant context

    Focus on maintaining the existing functionality while improving the logging quality.
  </action>
  <verify>grep -n "console\." /Volumes/extSSD/dev/projects/anime-recommendation/frontend/services/animeCacheService.ts</verify>
  <done>Zero console.log/console.error statements remain in animeCacheService.ts</done>
</task>

<task type="auto">
  <name>Task 2: Refactor jikanService.ts logging</name>
  <files>frontend/services/jikanService.ts</files>
  <action>
    Replace all console.log and console.error statements in jikanService.ts:
    - Import logger from '@/lib/logger' at the top
    - Replace console statements with appropriate logger calls
    - Add contextual information (API endpoints, response status, etc.)
    - Use child logger with service context
    - Maintain error handling and retry logic
    - Log API request/response details at debug level
    - Log errors with full context including the failed URL and error details

    The Jikan service handles external API calls, so log relevant request details.
  </action>
  <verify>grep -n "console\." /Volumes/extSSD/dev/projects/anime-recommendation/frontend/services/jikanService.ts</verify>
  <done>Zero console.log/console.error statements remain in jikanService.ts</done>
</task>

<task type="auto">
  <name>Task 3: Refactor anilistService.ts logging</name>
  <files>frontend/services/anilistService.ts</files>
  <action>
    Replace all console.log and console.error statements in anilistService.ts:
    - Import logger from '@/lib/logger' at the top
    - Replace console statements with structured logging
    - Add contextual information for GraphQL queries and responses
    - Use child logger with service context
    - Log query details and errors with proper context

    This service handles AniList GraphQL API calls.
  </action>
  <verify>grep -n "console\." /Volumes/extSSD/dev/projects/anime-recommendation/frontend/services/anilistService.ts</verify>
  <done>Zero console.log/console.error statements remain in anilistService.ts</done>
</task>

<task type="auto">
  <name>Task 4: Refactor animeService.ts logging</name>
  <files>frontend/services/animeService.ts</files>
  <action>
    Replace all console.log and console.error statements in animeService.ts:
    - Import logger from '@/lib/logger' at the top
    - Replace console statements with structured logging
    - Add contextual information for anime operations
    - Use child logger with service context
    - Maintain existing functionality while improving logging

    This appears to be a general anime service that might have console statements.
  </action>
  <verify>grep -n "console\." /Volumes/extSSD/dev/projects/anime-recommendation/frontend/services/animeService.ts</verify>
  <done>Zero console.log/console.error statements remain in animeService.ts</done>
</task>

</tasks>

<verification>
After completion:
1. All four service files import and use the logger
2. No console.log/console.error statements remain in services
3. Logs include contextual information
4. Error logs include full error details
</verification>

<success_criteria>
- All console.log/console.error statements removed from service files
- Logger is imported in all four service files
- Child loggers are used with service context
- Log messages include relevant contextual data
- Error logs include the error object and context
</success_criteria>

<output>
After completion, create `.planning/phases/01-logging-cleanup/01-02-SUMMARY.md`
</output>